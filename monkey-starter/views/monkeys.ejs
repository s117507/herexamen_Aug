<%- include("partials/header") %>
<%- include("partials/navbar") %>
<%- include("partials/flash") %>

<form method="get" action="">
    <label for="search">Search:</label>
    <input type="text" id="q" name="q" value="">
    <button type="submit">Search</button>
    <label for="sortField">Sort by:</label>
    <select id="sortField" name="sortField">
            <option value="id" selected>Id</option>
            <option value="name" >Name</option>
            <option value="description" >Description</option>
            <option value="species_id" >Species_id</option>
            <option value="country" >Country</option>
            <option value="gender" >Gender</option>
            <option value="weight" >Weight</option>   
            <option value="height" >Height</option>    
            <option value="year" >Year</option>   
            <option value="likes" >Likes</option>    
            <option value="personality_trait" >Personality_trait</option>
    </select>
    <label for="sortDirection">Sort direction:</label>
    <select id="sortDirection" name="sortDirection">
        <option value="asc" selected>Ascending</option>
        <option value="desc" >Descending</option>
    </select>
    <button type="submit">Sort</button>
</form>

<table>
    <thead>
        <tr>
            <th></th>
            <th>ID</th>
            <th>Name</th>
            <th>Description</th>
            <th>Species</th>
            <th>Country</th>
            <th>Gender</th>
            <th>Personality Trait</th>
            <th>Weight</th>
            <th>Height</th>
            <th>Year</th>
            <th>Age</th>
            <th>Likes</th>
        </tr>
    </thead>
    <tbody>
       <% for(let monkey of monkeys) { %>
        <tr>
            <td><img src="<%= monkey.image %>" width="100"></td>
            <td><%= monkey.id %></td>
            <td><%= monkey.name %></td>
            <td><%= monkey.description %></td>
            <td><a href="/species/<%= monkey.species.id%>"><%= monkey.species.name %></a></td>
            <td><%= monkey.country %></td>
            <td><%= monkey.gender %></td>
            <td><%= monkey.personality_trait %></td>
            <td><%= monkey.weight %>kg</td>
            <td><%= monkey.height %>cm</td>
            <td><%= monkey.year %></td>
            <td><%= calculateMonkeyAge(monkey.year)%>y</td>
                       <td>
                <form method="post" action="/monkeys/<%= monkey.id %>/like" class="like-form">
                    <button type="submit">Like (<%= monkey.likes %>)</button>
                </form>
            </td>
        </tr>
    <% } %>
    </tbody>
</table>

<%- include("partials/footer") %>